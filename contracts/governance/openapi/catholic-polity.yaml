openapi: 3.0.0
servers:
  - url: 'https://{env}-sg.portal.hocvienconggiao.com'
    variables:
      env:
        enum:
          - dev
          - prod
        default: dev

info:
  description: >-
    This is a server for Catholic Polity info.
  version: 0.6.1
  title: OpenAPI Catholic Polity info
  license:
    name: Apache-2.0
    url: 'https://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: polity
    description: Everything about your Polities
paths:
  /mutation-api/catholic-polity-service/parishes:
    post:
      tags:
        - parish
      summary: Add new parish
      description: ''
      operationId: add_parish
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Parish'
        '405':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/ParishRequest'
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/provinces:
    post:
      tags:
        - province
      summary: Add new province
      description: ''
      operationId: add_province
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Province'
        '405':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/ProvinceRequest'
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/dioceses:
    post:
      tags:
        - diocese
      summary: Add new diocese
      description: ''
      operationId: add_diocese
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Diocese'
        '405':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/DioceseRequest'
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/deaneries:
    post:
      tags:
        - deanery
      summary: Add new deanery
      description: ''
      operationId: add_deanery
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deanery'
        '405':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/DeaneryRequest'
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/institutes:
    post:
      tags:
        - institute
      summary: Add new institute
      description: ''
      operationId: add_institute
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institute'
        '405':
          description: Invalid input
      requestBody:
        $ref: '#/components/requestBodies/InstituteRequest'
      security:
        - polity_auth: []
  /query-api/catholic-polity-service/parishes:
    get:
      tags:
        - parish
      summary: Get all parishes
      description: Returns all parishes
      operationId: get_parishes
      parameters:
        - in: query
          name: deaneryId
          schema:
            type: string
            format: uuid
        - in: query
          name: dioceseId
          schema:
            type: string 
            format: uuid
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: offset
          schema:
            type: integer
            minimum: 0
          required: false
          description: The number of parishes to skip before starting to collect the result set.
        - in: query
          name: count
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          description: The number of parishes to return.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParishCollection'
        '400':
          description: Invalid ID supplied
        '404':
          description: Parish not found
  /query-api/catholic-polity-service/provinces:
    get:
      tags:
        - province
      summary: Get all provinces
      description: Returns all provinces
      operationId: get_provinces
      parameters:
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: provinceCode
          schema:
            $ref: '#/components/schemas/Code'
        - in: query
          name: offset
          schema:
            type: integer
            minimum: 0
          required: false
          description: The number of provinces to skip before starting to collect the result set.
        - in: query
          name: count
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          description: The number of provinces to return.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProvinceCollection'
        '400':
          description: Invalid ID supplied
        '404':
          description: Province not found
  /query-api/catholic-polity-service/dioceses:
    get:
      tags:
        - diocese
      summary: Get all dioceses
      description: Returns all dioceses
      operationId: get_dioceses
      parameters:
        - in: query
          name: provinceId
          schema:
            type: string
            format: uuid
        - in: query
          name: provinceCode
          schema:
            $ref: '#/components/schemas/Code'
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: offset
          schema:
            type: integer
            minimum: 0
          required: false
          description: The number of dioceses to skip before starting to collect the result set.
        - in: query
          name: count
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          description: The number of dioceses to return.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DioceseCollection'
        '400':
          description: Invalid ID supplied
        '404':
          description: Diocese not found
  /query-api/catholic-polity-service/deaneries:
    get:
      tags:
        - deanery
      summary: Get deaneries
      description: Returns all deaneries
      operationId: get_deaneries
      parameters:
        - in: query
          name: dioceseId
          schema:
            type: string
            format: uuid
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: offset
          schema:
            type: integer
            minimum: 0
          required: false
          description: The number of deaneries to skip before starting to collect the result set.
        - in: query
          name: count
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          description: The number of deaneries to return.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeaneryCollection'
        '400':
          description: Invalid ID supplied
        '404':
          description: Deanery not found
  /query-api/catholic-polity-service/institutes:
    get:
      tags:
        - institute
      summary: Get institutes
      description: Returns all institutes
      operationId: get_institutes
      parameters:
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: offset
          schema:
            type: integer
            minimum: 0
          required: false
          description: The number of institutes to skip before starting to collect the result set.
        - in: query
          name: count
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          description: The number of institutes to return.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstituteCollection'
        '400':
          description: Invalid ID supplied
        '404':
          description: Institute not found
  /query-api/catholic-polity-service/parishes/{id}:
    get:
      tags:
        - parish
      summary: Find parish by ID
      description: Returns a single parish
      operationId: get_parish_by_id
      parameters:
        - name: id
          in: path
          description: ID of parish to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Parish'
        '400':
          description: Invalid ID supplied
        '404':
          description: Parish not found
  /query-api/catholic-polity-service/provinces/{id}:
    get:
      tags:
        - province
      summary: Find province by ID
      description: Returns a single province
      operationId: get_province_by_id
      parameters:
        - name: id
          in: path
          description: ID of province to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Province'
        '400':
          description: Invalid ID supplied
        '404':
          description: Province not found
  /query-api/catholic-polity-service/dioceses/{id}:
    get:
      tags:
        - diocese
      summary: Find diocese by ID
      description: Returns a single diocese
      operationId: get_diocese_by_id
      parameters:
        - name: id
          in: path
          description: ID of diocese to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Diocese'
        '400':
          description: Invalid ID supplied
        '404':
          description: Diocese not found
  /query-api/catholic-polity-service/deaneries/{id}:
    get:
      tags:
        - deanery
      summary: Find deanery by ID
      description: Returns a single deanery
      operationId: get_deanery_by_id
      parameters:
        - name: id
          in: path
          description: ID of deanery to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deanery'
        '400':
          description: Invalid ID supplied
        '404':
          description: Deanery not found
  /query-api/catholic-polity-service/institutes/{id}:
    get:
      tags:
        - institute
      summary: Find institute by ID
      description: Returns a single institute
      operationId: get_institute_by_id
      parameters:
        - name: id
          in: path
          description: ID of institute to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institute'
        '400':
          description: Invalid ID supplied
        '404':
          description: Institute not found
  /mutation-api/catholic-polity-service/parishes/{id}:
    put:
      tags:
        - parish
      summary: Update an existing parish
      operationId: update_parish
      parameters:
        - name: id
          in: path
          description: ID of parish to update
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Parish'
        '400':
          description: Invalid ID supplied
        '404':
          description: Parish not found
        '405':
          description: Validation exception
      requestBody:
        $ref: '#/components/requestBodies/ParishRequest'
      security:
        - polity_auth: []
    delete:
      tags:
        - parish
      summary: "Delete parish by ID"
      operationId: delete_parish
      parameters:
        - name: id
          in: path
          description: ID of parish to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Parish not found
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/provinces/{id}:
    put:
      tags:
        - province
      summary: Update an existing province
      operationId: update_province
      parameters:
        - name: id
          in: path
          description: ID of province to update
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Province'
        '400':
          description: Invalid ID supplied
        '404':
          description: Province not found
        '405':
          description: Validation exception
      requestBody:
        $ref: '#/components/requestBodies/ProvinceRequest'
      security:
        - polity_auth: []
    delete:
      tags:
        - province
      summary: "Delete province by ID"
      operationId: delete_province
      parameters:
        - name: id
          in: path
          description: ID of province to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Province not found
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/deaneries/{id}:
    put:
      tags:
        - deanery
      summary: Update an existing deanery
      description: ''
      operationId: update_deanery
      parameters:
        - name: id
          in: path
          description: ID of deanery to update
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deanery'
        '400':
          description: Invalid ID supplied
        '404':
          description: Deanery not found
        '405':
          description: Validation exception
      requestBody:
        $ref: '#/components/requestBodies/DeaneryRequest'
      security:
        - polity_auth: []
    delete:
      tags:
        - deanery
      summary: "Delete deanery by ID"
      operationId: delete_deanery
      parameters:
        - name: id
          in: path
          description: ID of deanery to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Deanery not found
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/dioceses/{id}:
    put:
      tags:
        - diocese
      summary: Update an existing diocese
      description: ''
      operationId: update_diocese
      parameters:
        - name: id
          in: path
          description: ID of diocese to update
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Diocese'
        '400':
          description: Invalid ID supplied
        '404':
          description: Diocese not found
        '405':
          description: Validation exception
      requestBody:
        $ref: '#/components/requestBodies/DioceseRequest'
      security:
        - polity_auth: []
    delete:
      tags:
        - diocese
      summary: "Delete diocese by ID"
      operationId: delete_diocese
      parameters:
        - name: id
          in: path
          description: ID of diocese to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Diocese not found
      security:
        - polity_auth: []
  /mutation-api/catholic-polity-service/institutes/{id}:
    put:
      tags:
        - institute
      summary: Update an existing institute
      description: ''
      operationId: update_institute
      parameters:
        - name: id
          in: path
          description: ID of institute to update
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institute'
        '400':
          description: Invalid ID supplied
        '404':
          description: Institute not found
        '405':
          description: Validation exception
      requestBody:
        $ref: '#/components/requestBodies/InstituteRequest'
      security:
        - polity_auth: []
    delete:
      tags:
        - institute
      summary: "Delete institute by ID"
      operationId: delete_institute
      parameters:
        - name: id
          in: path
          description: ID of institute to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: successful operation
        '400':
          description: Invalid ID supplied
        '404':
          description: Institute not found
      security:
        - polity_auth: []
externalDocs:
  description: Find out more about Swagger
  url: 'http://swagger.io'
components:
  requestBodies:
    ParishArray:
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Parish'
      description: List of parishes object
      required: true
    ParishRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Parish'
    ProvinceArray:
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Province'
      description: List of province object
      required: true
    ProvinceRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Province'
    DeaneryArray:
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Deanery'
      description: List of deaneries object
      required: true
    DeaneryRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Deanery'
      description: Parish object that needs to be added to the database
      required: true
    DioceseArray:
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Diocese'
      description: List of dioceses object
      required: true
    DioceseRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Diocese'
      description: Diocese object that needs to be added to the database
      required: true
    InstituteArray:
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Institute'
      description: List of institutes object
      required: true
    InstituteRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Institute'
      description: Institute object that needs to be added to the database
      required: true
  securitySchemes:
    polity_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Code:
      type: string
      enum:
        - HA_NOI
        - HUE
        - SAI_GON
    Polity:
      type: object
      required:
        - "name"
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        locationEmail:
          type: string
        locationAddress:
          type: string
        locationName:
          type: string
        personInCharge:
           type: string
    Province:
      allOf:
        - $ref: "#/components/schemas/Polity"
      type: object
      required:
        - "code"
      properties:
        code:
          $ref: "#/components/schemas/Code"
    Diocese:
      allOf:
        - $ref: "#/components/schemas/Polity"
      type: object
      description: An area controlled by a ecclesiastical province
      required:
        - "province"
      properties:
        province:
          $ref: "#/components/schemas/Province"
    Deanery:
      allOf:
        - $ref: "#/components/schemas/Polity"
      type: object
      description: An area controlled by a diocese
      required:
        - "diocese"
      properties:
        diocese:
          $ref: "#/components/schemas/Diocese"
    Parish:
      allOf:
        - $ref: "#/components/schemas/Polity"
      type: object
      required:
        - "deanery"
      properties:
        deanery:
          $ref: "#/components/schemas/Deanery"
    Institute:
      allOf:
        - $ref: "#/components/schemas/Polity"
      type: object
    DioceseCollection:
      properties:
        dioceses:
          type: array
          items:
            $ref: '#/components/schemas/Diocese'
        hasMore:
          type: boolean
    DeaneryCollection:
      properties:
        deaneries:
          type: array
          items:
            $ref: '#/components/schemas/Deanery'
        hasMore:
          type: boolean
    ParishCollection:
      properties:
        parishes:
          type: array
          items:
            $ref: '#/components/schemas/Parish'
        hasMore:
          type: boolean
    ProvinceCollection:
      properties:
        provinces:
          type: array
          items:
            $ref: '#/components/schemas/Province'
        hasMore:
          type: boolean
    InstituteCollection:
      properties:
        institutes:
          type: array
          items:
            $ref: '#/components/schemas/Institute'
        hasMore:
          type: boolean

security:
  - polity_auth: []
